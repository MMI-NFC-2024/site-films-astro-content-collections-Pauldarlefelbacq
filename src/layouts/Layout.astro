---
import '../styles/global.css';


interface Props {
    titre: string;
}
const { titre } = Astro.props;
// autres options possibles

// const titre  = Astro.props.titre;
// const props  = Astro.props;

// Breadcrumbs logic
const pathname = Astro.url.pathname;
const pathSegments = pathname.split('/').filter(segment => segment !== '');

const breadcrumbs = [
    { name: 'Accueil', path: '/' }
];

pathSegments.forEach((segment, index) => {
    const path = '/' + pathSegments.slice(0, index + 1).join('/');
    const name = segment.charAt(0).toUpperCase() + segment.slice(1).replace(/-|_/g, ' ');
    breadcrumbs.push({ name, path });
});
---

<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<link rel="icon" href="/favicon.ico" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		<title>{ titre } | Site de films</title>
	</head>
	<body>
		<nav class="bg-gray-100 px-4 py-2 text-sm">
			<ol class="flex items-center space-x-2">
				{breadcrumbs.map((crumb, index) => (
					<li class="flex items-center">
						{index > 0 && <span class="mx-2 text-gray-400">/</span>}
						{index === breadcrumbs.length - 1 ? (
							<span class="text-gray-600 font-medium underline">{crumb.name}</span>
						) : (
							<a href={crumb.path} class="text-black group">
								{crumb.name}
								<div class="w-0 bg-black h-0.5 group-hover:w-full transition-all duration-300"></div>
							</a>
						)}
					</li>
				))}
			</ol>
		</nav>
		<main class="p-4">
			<slot />
		</main>
	</body>
</html>